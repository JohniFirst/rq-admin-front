var r=Object.defineProperty;var c=(e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var a=(e,t,s)=>c(e,typeof t!="symbol"?t+"":t,s);import{r as u,j as h}from"./index.js";class d{constructor(t,s,n,i){a(this,"text");a(this,"speed");a(this,"color");a(this,"x");a(this,"y");this.text=t,this.speed=s,this.color=n,this.x=i.width,this.y=Math.random()*i.height}move(){this.x-=this.speed}draw(t){t.font="20px Arial",t.fillStyle=this.color,t.fillText(this.text,this.x,this.y)}isOutOfScreen(t){return this.x+t.measureText(this.text).width<0}}class o{constructor(){a(this,"danmus");a(this,"canvas");a(this,"ctx");this.danmus=[],this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d")}addDanmu(t,s,n){this.danmus.push(new d(t,s,n,this.canvas))}update(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const t=[];for(const s of this.danmus)s.move(),s.draw(this.ctx),s.isOutOfScreen(this.ctx)||t.push(s);this.danmus=t,requestAnimationFrame(()=>this.update())}}function l(){return u.useEffect(()=>{const e=new o;e.update();const t=setInterval(()=>{e.addDanmu("这是一条较快的弹幕",3,"red")},100);return()=>{clearInterval(t)}},[]),h.jsx("div",{className:"custom-container",children:h.jsx("canvas",{id:"canvas",width:"600",height:"400"})})}export{l as default};
