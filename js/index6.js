import{r as s,aJ as S,aM as De,B as H,aN as ae,X as y,aO as _,aP as ce,a6 as A,ai as qe,aQ as Xe,ak as Qe,aR as ie,aS as Ze,z as L,ae as ue,aT as fe,p as k,aU as Ge,aH as Ue,aV as Ye,aW as Je,aX as B,a8 as Ke,aY as en,aZ as nn,w as Y,a0 as tn,H as de,a_ as on,a$ as ln,b0 as sn,a5 as rn,b1 as an,b2 as cn,b3 as un,b4 as fn,b5 as dn}from"./index.js";import{S as mn}from"./Skeleton.js";import{w as Cn}from"./CheckOutlined.js";function gn(){const[e,t]=s.useState([]),l=s.useCallback(n=>(t(o=>[].concat(S(o),[n])),()=>{t(o=>o.filter(c=>c!==n))}),[]);return[e,l]}function z(e){return!!(e!=null&&e.then)}const me=e=>{const{type:t,children:l,prefixCls:n,buttonProps:o,close:c,autoFocus:m,emitEvent:i,isSilent:a,quitOnNullishReturnValue:d,actionFn:r}=e,u=s.useRef(!1),C=s.useRef(null),[b,p]=De(!1),g=(...f)=>{c==null||c.apply(void 0,f)};s.useEffect(()=>{let f=null;return m&&(f=setTimeout(()=>{var x;(x=C.current)===null||x===void 0||x.focus({preventScroll:!0})})),()=>{f&&clearTimeout(f)}},[]);const O=f=>{z(f)&&(p(!0),f.then((...x)=>{p(!1,!0),g.apply(void 0,x),u.current=!1},x=>{if(p(!1,!0),u.current=!1,!(a!=null&&a()))return Promise.reject(x)}))},v=f=>{if(u.current)return;if(u.current=!0,!r){g();return}let x;if(i){if(x=r(f),d&&!z(x)){u.current=!1,g(f);return}}else if(r.length)x=r(c),u.current=!1;else if(x=r(),!z(x)){g();return}O(x)};return s.createElement(H,Object.assign({},ae(t),{onClick:v,loading:b,prefixCls:n},o,{ref:C}),l)},N=y.createContext({}),{Provider:Ce}=N,J=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:l,isSilent:n,mergedOkCancel:o,rootPrefixCls:c,close:m,onCancel:i,onConfirm:a}=s.useContext(N);return o?y.createElement(me,{isSilent:n,actionFn:i,close:(...d)=>{m==null||m.apply(void 0,d),a==null||a(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${c}-btn`},l):null},K=()=>{const{autoFocusButton:e,close:t,isSilent:l,okButtonProps:n,rootPrefixCls:o,okTextLocale:c,okType:m,onConfirm:i,onOk:a}=s.useContext(N);return y.createElement(me,{isSilent:l,type:m||"primary",actionFn:a,close:(...d)=>{t==null||t.apply(void 0,d),i==null||i(!0)},autoFocus:e==="ok",buttonProps:n,prefixCls:`${o}-btn`},c)};function ee(...e){const t={};return e.forEach(l=>{l&&Object.keys(l).forEach(n=>{l[n]!==void 0&&(t[n]=l[n])})}),t}function ne(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function te(e){const{closable:t,closeIcon:l}=e||{};return y.useMemo(()=>{if(!t&&(t===!1||l===!1||l===null))return!1;if(t===void 0&&l===void 0)return null;let n={closeIcon:typeof l!="boolean"&&l!==null?l:void 0};return t&&typeof t=="object"&&(n=Object.assign(Object.assign({},n),t)),n},[t,l])}const bn={};function vn(e,t,l=bn){const n=te(e),o=te(t),[c]=_("global",ce.global),m=typeof n!="boolean"?!!(n!=null&&n.disabled):!1,i=y.useMemo(()=>Object.assign({closeIcon:y.createElement(A,null)},l),[l]),a=y.useMemo(()=>n===!1?!1:n?ee(i,o,n):o===!1?!1:o?ee(i,o):i.closable?i:!1,[n,o,i]);return y.useMemo(()=>{if(a===!1)return[!1,null,m,{}];const{closeIconRender:d}=i,{closeIcon:r}=a;let u=r;const C=qe(a,!0);return u!=null&&(d&&(u=d(r)),u=y.isValidElement(u)?y.cloneElement(u,Object.assign({"aria-label":c.close},C)):y.createElement("span",Object.assign({"aria-label":c.close},C),u)),[!0,u,m,C]},[a,i])}const pn=()=>Xe()&&window.document.documentElement;function oe(){}const xn=s.createContext({add:oe,remove:oe});function yn(e){const t=s.useContext(xn),l=s.useRef(null);return Qe(o=>{if(o){const c=e?o.querySelector(e):o;t.add(c),l.current=c}else t.remove(l.current)})}const le=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:l}=s.useContext(N);return y.createElement(H,Object.assign({onClick:l},e),t)},se=()=>{const{confirmLoading:e,okButtonProps:t,okType:l,okTextLocale:n,onOk:o}=s.useContext(N);return y.createElement(H,Object.assign({},ae(l),{loading:e,onClick:o},t),n)};function ge(e,t){return y.createElement("span",{className:`${e}-close-x`},t||y.createElement(A,{className:`${e}-close-icon`}))}const be=e=>{const{okText:t,okType:l="primary",cancelText:n,confirmLoading:o,onOk:c,onCancel:m,okButtonProps:i,cancelButtonProps:a,footer:d}=e,[r]=_("Modal",ie()),u=t||(r==null?void 0:r.okText),C=n||(r==null?void 0:r.cancelText),b={confirmLoading:o,okButtonProps:i,cancelButtonProps:a,okTextLocale:u,cancelTextLocale:C,okType:l,onOk:c,onCancel:m},p=y.useMemo(()=>b,S(Object.values(b)));let g;return typeof d=="function"||typeof d>"u"?(g=y.createElement(y.Fragment,null,y.createElement(le,null),y.createElement(se,null)),typeof d=="function"&&(g=d(g,{OkBtn:se,CancelBtn:le})),g=y.createElement(Ce,{value:p},g)):g=d,y.createElement(Ze,{disabled:!1},g)};var On=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};let W;const Pn=e=>{W={x:e.pageX,y:e.pageY},setTimeout(()=>{W=null},100)};pn()&&document.documentElement.addEventListener("click",Pn,!0);const ve=e=>{const{prefixCls:t,className:l,rootClassName:n,open:o,wrapClassName:c,centered:m,getContainer:i,focusTriggerAfterClose:a=!0,style:d,visible:r,width:u=520,footer:C,classNames:b,styles:p,children:g,loading:O,confirmLoading:v,zIndex:f,mousePosition:x,onOk:j,onCancel:I,destroyOnHidden:h,destroyOnClose:Te}=e,ke=On(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel","destroyOnHidden","destroyOnClose"]),{getPopupContainer:Se,getPrefixCls:V,direction:we,modal:P}=s.useContext(L),D=T=>{v||I==null||I(T)},Ne=T=>{j==null||j(T)},E=V("modal",t),q=V(),X=ue(E),[Me,Q,Re]=fe(E,X),Fe=k(c,{[`${E}-centered`]:m??(P==null?void 0:P.centered),[`${E}-wrap-rtl`]:we==="rtl"}),Be=C!==null&&!O?s.createElement(be,Object.assign({},e,{onOk:Ne,onCancel:D})):null,[Z,G,_e,Le]=vn(ne(e),ne(P),{closable:!0,closeIcon:s.createElement(A,{className:`${E}-close-icon`}),closeIconRender:T=>ge(E,T)}),ze=yn(`.${E}-content`),[We,He]=Ge("Modal",f),[Ae,R]=s.useMemo(()=>u&&typeof u=="object"?[void 0,u]:[u,void 0],[u]),Ve=s.useMemo(()=>{const T={};return R&&Object.keys(R).forEach(U=>{const F=R[U];F!==void 0&&(T[`--${E}-${U}-width`]=typeof F=="number"?`${F}px`:F)}),T},[R]);return Me(s.createElement(Ue,{form:!0,space:!0},s.createElement(Ye.Provider,{value:He},s.createElement(Je,Object.assign({width:Ae},ke,{zIndex:We,getContainer:i===void 0?Se:i,prefixCls:E,rootClassName:k(Q,n,Re,X),footer:Be,visible:o??r,mousePosition:x??W,onClose:D,closable:Z&&Object.assign({disabled:_e,closeIcon:G},Le),closeIcon:G,focusTriggerAfterClose:a,transitionName:B(q,"zoom",e.transitionName),maskTransitionName:B(q,"fade",e.maskTransitionName),className:k(Q,l,P==null?void 0:P.className),style:Object.assign(Object.assign(Object.assign({},P==null?void 0:P.style),d),Ve),classNames:Object.assign(Object.assign(Object.assign({},P==null?void 0:P.classNames),b),{wrapper:k(Fe,b==null?void 0:b.wrapper)}),styles:Object.assign(Object.assign({},P==null?void 0:P.styles),p),panelRef:ze,destroyOnClose:h??Te}),O?s.createElement(mn,{active:!0,title:!1,paragraph:{rows:4},className:`${E}-body-skeleton`}):g))))},hn=e=>{const{componentCls:t,titleFontSize:l,titleLineHeight:n,modalConfirmIconSize:o,fontSize:c,lineHeight:m,modalTitleHeight:i,fontHeight:a,confirmBodyPadding:d}=e,r=`${t}-confirm`;return{[r]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${r}-body-wrapper`]:Object.assign({},tn()),[`&${t} ${t}-body`]:{padding:d},[`${r}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(a).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(i).sub(o).equal()).div(2).equal()}},[`${r}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Y(e.marginSM)})`},[`${e.iconCls} + ${r}-paragraph`]:{maxWidth:`calc(100% - ${Y(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${r}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:l,lineHeight:n},[`${r}-content`]:{color:e.colorText,fontSize:c,lineHeight:m},[`${r}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${r}-error ${r}-body > ${e.iconCls}`]:{color:e.colorError},[`${r}-warning ${r}-body > ${e.iconCls},
        ${r}-confirm ${r}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${r}-info ${r}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${r}-success ${r}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},En=Ke(["Modal","confirm"],e=>{const t=en(e);return[hn(t)]},nn,{order:-1e3});var $n=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};function pe(e){const{prefixCls:t,icon:l,okText:n,cancelText:o,confirmPrefixCls:c,type:m,okCancel:i,footer:a,locale:d}=e,r=$n(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let u=l;if(!l&&l!==null)switch(m){case"info":u=s.createElement(cn,null);break;case"success":u=s.createElement(an,null);break;case"error":u=s.createElement(rn,null);break;default:u=s.createElement(sn,null)}const C=i??m==="confirm",b=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[p]=_("Modal"),g=d||p,O=n||(C?g==null?void 0:g.okText:g==null?void 0:g.justOkText),v=o||(g==null?void 0:g.cancelText),f=Object.assign({autoFocusButton:b,cancelTextLocale:v,okTextLocale:O,mergedOkCancel:C},r),x=s.useMemo(()=>f,S(Object.values(f))),j=s.createElement(s.Fragment,null,s.createElement(J,null),s.createElement(K,null)),I=e.title!==void 0&&e.title!==null,h=`${c}-body`;return s.createElement("div",{className:`${c}-body-wrapper`},s.createElement("div",{className:k(h,{[`${h}-has-title`]:I})},u,s.createElement("div",{className:`${c}-paragraph`},I&&s.createElement("span",{className:`${c}-title`},e.title),s.createElement("div",{className:`${c}-content`},e.content))),a===void 0||typeof a=="function"?s.createElement(Ce,{value:x},s.createElement("div",{className:`${c}-btns`},typeof a=="function"?a(j,{OkBtn:K,CancelBtn:J}):j)):a,s.createElement(En,{prefixCls:t}))}const jn=e=>{const{close:t,zIndex:l,maskStyle:n,direction:o,prefixCls:c,wrapClassName:m,rootPrefixCls:i,bodyStyle:a,closable:d=!1,onConfirm:r,styles:u}=e,C=`${c}-confirm`,b=e.width||416,p=e.style||{},g=e.mask===void 0?!0:e.mask,O=e.maskClosable===void 0?!1:e.maskClosable,v=k(C,`${C}-${e.type}`,{[`${C}-rtl`]:o==="rtl"},e.className),[,f]=on(),x=s.useMemo(()=>l!==void 0?l:f.zIndexPopupBase+ln,[l,f]);return s.createElement(ve,Object.assign({},e,{className:v,wrapClassName:k({[`${C}-centered`]:!!e.centered},m),onCancel:()=>{t==null||t({triggerCancel:!0}),r==null||r(!1)},title:"",footer:null,transitionName:B(i||"","zoom",e.transitionName),maskTransitionName:B(i||"","fade",e.maskTransitionName),mask:g,maskClosable:O,style:p,styles:Object.assign({body:a,mask:n},u),width:b,zIndex:x,closable:d}),s.createElement(pe,Object.assign({},e,{confirmPrefixCls:C})))},xe=e=>{const{rootPrefixCls:t,iconPrefixCls:l,direction:n,theme:o}=e;return s.createElement(de,{prefixCls:t,iconPrefixCls:l,direction:n,theme:o},s.createElement(jn,Object.assign({},e)))},w=[];let ye="";function Oe(){return ye}const In=e=>{var t,l;const{prefixCls:n,getContainer:o,direction:c}=e,m=ie(),i=s.useContext(L),a=Oe()||i.getPrefixCls(),d=n||`${a}-modal`;let r=o;return r===!1&&(r=void 0),y.createElement(xe,Object.assign({},e,{rootPrefixCls:a,prefixCls:d,iconPrefixCls:i.iconPrefixCls,theme:i.theme,direction:c??i.direction,locale:(l=(t=i.locale)===null||t===void 0?void 0:t.Modal)!==null&&l!==void 0?l:m,getContainer:r}))};function M(e){const t=un(),l=document.createDocumentFragment();let n=Object.assign(Object.assign({},e),{close:a,open:!0}),o,c;function m(...r){var u;if(r.some(p=>p==null?void 0:p.triggerCancel)){var b;(u=e.onCancel)===null||u===void 0||(b=u).call.apply(b,[e,()=>{}].concat(S(r.slice(1))))}for(let p=0;p<w.length;p++)if(w[p]===a){w.splice(p,1);break}c()}function i(r){clearTimeout(o),o=setTimeout(()=>{const u=t.getPrefixCls(void 0,Oe()),C=t.getIconPrefixCls(),b=t.getTheme(),p=y.createElement(In,Object.assign({},r));c=fn()(y.createElement(de,{prefixCls:u,iconPrefixCls:C,theme:b},t.holderRender?t.holderRender(p):p),l)})}function a(...r){n=Object.assign(Object.assign({},n),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),m.apply(this,r)}}),n.visible&&delete n.visible,i(n)}function d(r){typeof r=="function"?n=r(n):n=Object.assign(Object.assign({},n),r),i(n)}return i(n),w.push(a),{destroy:a,update:d}}function Pe(e){return Object.assign(Object.assign({},e),{type:"warning"})}function he(e){return Object.assign(Object.assign({},e),{type:"info"})}function Ee(e){return Object.assign(Object.assign({},e),{type:"success"})}function $e(e){return Object.assign(Object.assign({},e),{type:"error"})}function je(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Tn({rootPrefixCls:e}){ye=e}var kn=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};const Sn=(e,t)=>{var l,{afterClose:n,config:o}=e,c=kn(e,["afterClose","config"]);const[m,i]=s.useState(!0),[a,d]=s.useState(o),{direction:r,getPrefixCls:u}=s.useContext(L),C=u("modal"),b=u(),p=()=>{var f;n(),(f=a.afterClose)===null||f===void 0||f.call(a)},g=(...f)=>{var x;if(i(!1),f.some(h=>h==null?void 0:h.triggerCancel)){var I;(x=a.onCancel)===null||x===void 0||(I=x).call.apply(I,[a,()=>{}].concat(S(f.slice(1))))}};s.useImperativeHandle(t,()=>({destroy:g,update:f=>{d(x=>{const j=typeof f=="function"?f(x):f;return Object.assign(Object.assign({},x),j)})}}));const O=(l=a.okCancel)!==null&&l!==void 0?l:a.type==="confirm",[v]=_("Modal",ce.Modal);return s.createElement(xe,Object.assign({prefixCls:C,rootPrefixCls:b},a,{close:g,open:m,afterClose:p,okText:a.okText||(O?v==null?void 0:v.okText:v==null?void 0:v.justOkText),direction:a.direction||r,cancelText:a.cancelText||(v==null?void 0:v.cancelText)},c))},wn=s.forwardRef(Sn);let re=0;const Nn=s.memo(s.forwardRef((e,t)=>{const[l,n]=gn();return s.useImperativeHandle(t,()=>({patchElement:n}),[]),s.createElement(s.Fragment,null,l)}));function Mn(){const e=s.useRef(null),[t,l]=s.useState([]);s.useEffect(()=>{t.length&&(S(t).forEach(m=>{m()}),l([]))},[t]);const n=s.useCallback(c=>function(i){var a;re+=1;const d=s.createRef();let r;const u=new Promise(O=>{r=O});let C=!1,b;const p=s.createElement(wn,{key:`modal-${re}`,config:c(i),ref:d,afterClose:()=>{b==null||b()},isSilent:()=>C,onConfirm:O=>{r(O)}});return b=(a=e.current)===null||a===void 0?void 0:a.patchElement(p),b&&w.push(b),{destroy:()=>{function O(){var v;(v=d.current)===null||v===void 0||v.destroy()}d.current?O():l(v=>[].concat(S(v),[O]))},update:O=>{function v(){var f;(f=d.current)===null||f===void 0||f.update(O)}d.current?v():l(f=>[].concat(S(f),[v]))},then:O=>(C=!0,u.then(O))}},[]);return[s.useMemo(()=>({info:n(he),success:n(Ee),error:n($e),warning:n(Pe),confirm:n(je)}),[]),s.createElement(Nn,{key:"modal-holder",ref:e})]}var Rn=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};const Fn=e=>{const{prefixCls:t,className:l,closeIcon:n,closable:o,type:c,title:m,children:i,footer:a}=e,d=Rn(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=s.useContext(L),u=r(),C=t||r("modal"),b=ue(u),[p,g,O]=fe(C,b),v=`${C}-confirm`;let f={};return c?f={closable:o??!1,title:"",footer:"",children:s.createElement(pe,Object.assign({},e,{prefixCls:C,confirmPrefixCls:v,rootPrefixCls:u,content:i}))}:f={closable:o??!0,title:m,footer:a!==null&&s.createElement(be,Object.assign({},e)),children:i},p(s.createElement(dn,Object.assign({prefixCls:C,className:k(g,`${C}-pure-panel`,c&&v,c&&`${v}-${c}`,l,O,b)},d,{closeIcon:ge(C,n),closable:o},f)))},Bn=Cn(Fn);function Ie(e){return M(Pe(e))}const $=ve;$.useModal=Mn;$.info=function(t){return M(he(t))};$.success=function(t){return M(Ee(t))};$.error=function(t){return M($e(t))};$.warning=Ie;$.warn=Ie;$.confirm=function(t){return M(je(t))};$.destroyAll=function(){for(;w.length;){const t=w.pop();t&&t()}};$.config=Tn;$._InternalPanelDoNotUseOrYouWillBeFired=Bn;export{$ as M,yn as a,ee as m,ne as p,vn as u};
