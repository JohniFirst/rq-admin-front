import{r as s,j as t}from"./index.js";import{S as X}from"./index33.js";import{C as z}from"./index31.js";import{T as G}from"./index32.js";import"./Skeleton.js";import"./EllipsisOutlined.js";import"./Overflow.js";const Y="_videoPlayer_1q9mx_1",Z="_video_1q9mx_1",ee="_controls_1q9mx_27",te="_visible_1q9mx_49",ne="_progressContainer_1q9mx_57",se="_timeProgress_1q9mx_67",oe="_timeDisplay_1q9mx_79",re="_sliderContainer_1q9mx_89",ae="_slider_1q9mx_89",le="_controlBar_1q9mx_135",ce="_leftControls_1q9mx_147",ie="_rightControls_1q9mx_149",ue="_controlButton_1q9mx_161",de="_active_1q9mx_195",me="_volumeControlContainer_1q9mx_205",pe="_playbackRateContainer_1q9mx_207",fe="_qualityControlContainer_1q9mx_209",ve="_danmakuControlContainer_1q9mx_211",he="_volumeSlider_1q9mx_221",ge="_playbackRateMenu_1q9mx_223",xe="_qualityMenu_1q9mx_225",ye="_danmakuInput_1q9mx_227",Ce="_playbackRateOption_1q9mx_333",_e="_qualityOption_1q9mx_335",be="_previewCanvas_1q9mx_417",ke="_centerPlayButton_1q9mx_453",je="_playButton_1q9mx_467",o={videoPlayer:Y,video:Z,controls:ee,visible:te,progressContainer:ne,timeProgress:se,timeDisplay:oe,sliderContainer:re,slider:ae,controlBar:le,leftControls:ce,rightControls:ie,controlButton:ue,active:de,volumeControlContainer:me,playbackRateContainer:pe,qualityControlContainer:fe,danmakuControlContainer:ve,volumeSlider:he,playbackRateMenu:ge,qualityMenu:xe,danmakuInput:ye,playbackRateOption:Ce,qualityOption:_e,previewCanvas:be,centerPlayButton:ke,playButton:je},Ee=({isEnabled:m,onToggle:a,onSend:p})=>{const[c,i]=s.useState(!1),[r,e]=s.useState(""),f=s.useRef(null);s.useEffect(()=>{const h=_=>{f.current&&!f.current.contains(_.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const u=()=>{r.trim()&&(p(r),e(""),i(!1))},v=h=>{h.key==="Enter"&&u()};return t.jsxs("div",{ref:f,className:o.danmakuControlContainer,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[t.jsx("button",{className:`${o.controlButton} ${m?o.active:""}`,onClick:a,"aria-label":"Toggle Danmaku",type:"button",children:"ðŸ’¬"}),c&&t.jsxs("div",{className:o.danmakuInputContainer,children:[t.jsx("input",{type:"text",value:r,onChange:h=>e(h.target.value),onKeyDown:v,placeholder:"è¾“å…¥å¼¹å¹•å†…å®¹",className:o.danmakuInput}),t.jsx("button",{type:"button",onClick:u,className:o.danmakuSendButton,disabled:!r.trim(),children:"å‘é€"})]})]})},Me=[.5,.75,1,1.25,1.5,2],we=({playbackRate:m,onPlaybackRateChange:a})=>{const[p,c]=s.useState(!1),i=s.useRef(null);return s.useEffect(()=>{const r=e=>{i.current&&!i.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]),t.jsxs("div",{ref:i,className:o.playbackRateContainer,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[t.jsxs("button",{className:o.controlButton,onClick:()=>c(!p),"aria-label":"Playback Speed",type:"button",children:[m,"x"]}),p&&t.jsx("div",{className:o.playbackRateMenu,children:Me.map(r=>t.jsxs("button",{type:"button",className:`${o.playbackRateOption} ${r===m?o.active:""}`,onClick:()=>{a(r),c(!1)},children:[r,"x"]},r))})]})},Se=({currentTime:m,duration:a,onTimeChange:p,onDragStart:c,onDragEnd:i,videoRef:r})=>{const e=s.useRef(null),[f,u]=s.useState(!1),[v,h]=s.useState(0),[_,P]=s.useState(!1),[R,T]=s.useState(16/9),[y,k]=s.useState(null),b=d=>{if(d===void 0)return"0:00";const l=Math.floor(d/60),g=Math.floor(d%60);return`${l}:${g.toString().padStart(2,"0")}`};s.useEffect(()=>{if(r.current){const d=r.current,l=document.createElement("video");return l.src=d.src,l.muted=!0,l.preload="metadata",k(l),()=>{l.pause(),l.src=""}}},[r]);const q=d=>{if(_)return;const l=d.currentTarget.getBoundingClientRect(),x=(d.clientX-l.left)/l.width*a;h(x),u(!0),D(x)},B=()=>{_||u(!1)},D=d=>{if(!y||!e.current)return;const l=e.current,g=l.getContext("2d");if(!g)return;y.currentTime=d;const x=()=>{g.drawImage(y,0,0,l.width,l.height),y.removeEventListener("seeked",x)};y.addEventListener("seeked",x)};s.useEffect(()=>{if(e.current&&r.current){const d=e.current,l=r.current,g=l.videoWidth,x=l.videoHeight;if(g&&x){const S=g/x;T(S);const N=160,C=Math.round(N/S);d.width=N,d.height=C}}},[r]);const M=()=>{P(!0),c()},L=()=>{P(!1),i()},w=d=>{p(d)};return t.jsxs("div",{className:o.progressContainer,children:[t.jsx("div",{className:o.timeProgress,children:t.jsxs("span",{className:o.timeDisplay,children:[b(m)," / ",b(a)]})}),t.jsx("div",{className:o.sliderContainer,onMouseMove:q,onMouseLeave:B,onMouseDown:M,onMouseUp:L,children:t.jsx(X,{value:m,max:a,onChange:w,tooltip:{formatter:b},className:o.slider,styles:{rail:{backgroundColor:"rgba(255, 255, 255, 0.3)"},track:{backgroundColor:"#1890ff"},handle:{borderColor:"#1890ff"}}})}),t.jsx("canvas",{ref:e,className:`${o.previewCanvas} ${f?o.visible:""}`,style:{left:`${v/a*100}%`,border:"none",height:`${Math.round(160/R)}px`}})]})},Ne=["auto","1080P","720P","480P"],Pe=({currentQuality:m,onQualityChange:a})=>{const[p,c]=s.useState(!1),i=s.useRef(null);return s.useEffect(()=>{const r=e=>{i.current&&!i.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]),t.jsxs("div",{ref:i,className:o.qualityControlContainer,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[t.jsx("button",{type:"button",className:o.controlButton,onClick:()=>c(!p),"aria-label":"Video Quality",children:"HD"}),p&&t.jsx("div",{className:o.qualityMenu,children:Ne.map(r=>t.jsx("button",{type:"button",className:`${o.qualityOption} ${r===m?o.active:""}`,onClick:()=>{a(r),c(!1)},children:r},r))})]})},qe=({volume:m,isMuted:a,onVolumeChange:p,onMuteToggle:c})=>{const[i,r]=s.useState(!1),e=s.useRef(null);s.useEffect(()=>{const u=v=>{e.current&&!e.current.contains(v.target)&&r(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]);const f=u=>{p(Number(u.target.value))};return t.jsxs("div",{ref:e,className:o.volumeControlContainer,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[t.jsx("button",{type:"button",className:o.controlButton,onClick:c,"aria-label":a?"Unmute":"Mute",children:a?"ðŸ”‡":m>.5?"ðŸ”Š":m>0?"ðŸ”‰":"ðŸ”ˆ"}),i&&t.jsx("div",{className:o.volumeSliderContainer,children:t.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:a?0:m,onChange:f,className:o.volumeSlider,"aria-label":"Volume"})})]})},Re=({src:m,poster:a,className:p="",width:c="100%",height:i="auto",captions:r=[]})=>{const e=s.useRef(null),f=s.useRef(null),[u,v]=s.useState(!1),[h,_]=s.useState(0),[P,R]=s.useState(0),[T,y]=s.useState(1),[k,b]=s.useState(!1),[q,B]=s.useState(!1),[D,M]=s.useState(!0),[L,w]=s.useState(!0),[d,l]=s.useState(!1),[g,x]=s.useState(1),[S,N]=s.useState(null),[C,F]=s.useState(null),j=s.useCallback(n=>{C&&clearTimeout(C),N(n);const E=setTimeout(()=>{N(null)},2e3);F(E)},[C]);s.useEffect(()=>()=>{C&&clearTimeout(C)},[C]);const O=s.useCallback(()=>{e.current&&(u?e.current.pause():e.current.play())},[u]),A=()=>{!e.current||d||_(e.current.currentTime)},K=()=>{e.current&&R(e.current.duration)},U=()=>{v(!1),w(!0)},H=n=>{e.current&&(e.current.currentTime=n,_(n))},Q=n=>{e.current&&(e.current.volume=n,y(n),n===0?b(!0):k&&b(!1))},I=()=>{e.current&&(e.current.muted=!k,b(!k))},W=n=>{e.current&&(e.current.playbackRate=n,x(n))},$=()=>{f.current&&(document.fullscreenElement?document.exitFullscreen():f.current.requestFullscreen())},J=n=>{n.code==="Space"?(n.preventDefault(),e.current&&(e.current.paused?(e.current.play(),v(!0),j("å¼€å§‹æ’­æ”¾")):(e.current.pause(),v(!1),j("å·²æš‚åœ")))):n.code==="ArrowLeft"?(n.preventDefault(),e.current&&(e.current.currentTime=Math.max(0,e.current.currentTime-5),j("å¿«é€€ 5 ç§’"))):n.code==="ArrowRight"?(n.preventDefault(),e.current&&(e.current.currentTime=Math.min(e.current.duration,e.current.currentTime+5),j("å¿«è¿› 5 ç§’"))):n.code==="ArrowUp"?(n.preventDefault(),e.current&&(e.current.volume=Math.min(1,e.current.volume+.1),y(e.current.volume),j(`éŸ³é‡: ${Math.round(e.current.volume*100)}%`))):n.code==="ArrowDown"?(n.preventDefault(),e.current&&(e.current.volume=Math.max(0,e.current.volume-.1),y(e.current.volume),j(`éŸ³é‡: ${Math.round(e.current.volume*100)}%`))):n.code==="KeyM"?(n.preventDefault(),I()):n.code==="KeyF"&&(n.preventDefault(),$())};return s.useEffect(()=>{const n=e.current;if(!n)return;const E=()=>{v(!0),w(!1)},V=()=>{v(!1),w(!0)};return n.addEventListener("play",E),n.addEventListener("pause",V),()=>{n.removeEventListener("play",E),n.removeEventListener("pause",V)}},[]),s.useEffect(()=>{const n=()=>{B(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",n),()=>{document.removeEventListener("fullscreenchange",n)}},[]),s.useEffect(()=>{const n=f.current;n&&n.focus()},[]),t.jsxs("div",{ref:f,className:`${o.videoPlayer} ${p}`,style:{width:c,height:i},onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),onKeyDown:J,onClick:()=>{var n;return(n=f.current)==null?void 0:n.focus()},role:"application","aria-label":"Video Player",children:[t.jsx("video",{ref:e,src:m,poster:a,className:o.video,onClick:O,onTimeUpdate:A,onEnded:U,onLoadedMetadata:K,children:r.map((n,E)=>t.jsx("track",{kind:"captions",src:n.src,label:n.label,srcLang:n.srcLang},E))}),L&&!u&&!d&&t.jsx("div",{className:o.centerPlayButton,onClick:O,children:t.jsx("button",{type:"button",className:o.playButton,"aria-label":u?"Pause":"Play",children:u?"â¸":"â–¶"})}),t.jsxs("div",{className:`${o.controls} ${D?o.visible:""}`,onMouseEnter:()=>M(!0),children:[t.jsx(Se,{currentTime:h,duration:P,onTimeChange:H,onDragStart:()=>l(!0),onDragEnd:()=>l(!1),videoRef:e}),t.jsxs("div",{className:o.controlBar,children:[t.jsxs("div",{className:o.leftControls,children:[t.jsx("button",{type:"button",className:o.controlButton,onClick:O,"aria-label":u?"Pause":"Play",children:u?"â¸":"â–¶"}),t.jsx(qe,{volume:T,isMuted:k,onVolumeChange:Q,onMuteToggle:I})]}),t.jsxs("div",{className:o.rightControls,children:[t.jsx(we,{playbackRate:g,onPlaybackRateChange:W}),t.jsx(Pe,{currentQuality:"auto",onQualityChange:()=>{}}),t.jsx(Ee,{isEnabled:!1,onToggle:()=>{},onSend:()=>{}}),t.jsx("button",{type:"button",className:o.controlButton,onClick:$,"aria-label":q?"Exit Fullscreen":"Enter Fullscreen",children:q?"â¤“":"â¤¢"})]})]})]}),S&&t.jsx("div",{className:o.toast,children:S})]})},Ve=()=>{const m=[{key:"1",title:"é•¿è§†é¢‘ç¤ºä¾‹ (20åˆ†é’Ÿ)",url:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4",poster:"https://storage.googleapis.com/gtv-videos-bucket/sample/images/ForBiggerFun.jpg"},{key:"2",title:"å¦ä¸€ä¸ªé•¿è§†é¢‘ç¤ºä¾‹ (25åˆ†é’Ÿ)",url:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4",poster:"https://storage.googleapis.com/gtv-videos-bucket/sample/images/ForBiggerJoyrides.jpg"}];return t.jsx("div",{className:"p-6 bg-gray-100 min-h-screen",children:t.jsxs(z,{title:"è§†é¢‘æ’­æ”¾å™¨æ¼”ç¤º",className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"åŠŸèƒ½è¯´æ˜Ž"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:"ç‚¹å‡»è§†é¢‘åŒºåŸŸæˆ–ä¸­å¤®æ’­æ”¾æŒ‰é’®å¯ä»¥æ’­æ”¾/æš‚åœè§†é¢‘"}),t.jsx("li",{children:"é¼ æ ‡æ‚¬åœåœ¨è¿›åº¦æ¡ä¸Šå¯ä»¥é¢„è§ˆå¯¹åº”æ—¶é—´çš„è§†é¢‘ç”»é¢"}),t.jsx("li",{children:"ç‚¹å‡»è¿›åº¦æ¡å¯ä»¥è·³è½¬åˆ°å¯¹åº”æ—¶é—´ç‚¹"}),t.jsx("li",{children:"ä½¿ç”¨éŸ³é‡æŽ§åˆ¶ã€æ’­æ”¾é€Ÿåº¦ã€æ¸…æ™°åº¦ã€å¼¹å¹•ç­‰åŠŸèƒ½"}),t.jsx("li",{children:"ç‚¹å‡»æˆªå±æŒ‰é’®å¯ä»¥æˆªå–å½“å‰è§†é¢‘ç”»é¢"}),t.jsx("li",{children:"ç‚¹å‡»å…¨å±æŒ‰é’®æˆ–æŒ‰Fé”®å¯ä»¥åˆ‡æ¢å…¨å±æ¨¡å¼"})]})]}),t.jsx(G,{defaultActiveKey:"1",items:m.map(a=>({key:a.key,label:a.title,children:t.jsx("div",{className:"my-4",children:t.jsx(Re,{src:a.url,poster:a.poster,width:"100%",height:"auto"})})}))})]})})};export{Ve as default};
